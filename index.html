<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emas Binshiman Fintech Platform</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load Lucide Icons as a standard ES Module (FIXED IMPORT) -->
    <script type="module">
        // Importing the library using the ESM bundle URL and named exports
        import { createIcons, icons } from 'https://unpkg.com/lucide@latest/dist/esm/lucide.js';
        
        // Expose lucide globally for the main script to access (optional, but clean)
        window.lucide = { createIcons, icons };

        document.addEventListener('DOMContentLoaded', () => {
            createIcons({ icons });
        });
    </script>

    <style>
        /* Define custom keyframes for animations */
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .animate-marquee {
            animation: marquee 20s linear infinite;
        }

        @keyframes pulse-slow {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.4; }
        }
        .animate-pulse-slow {
            animation: pulse-slow 6s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            animation: slideUp 0.4s ease-out forwards;
        }

        .scroll-mt-24 {
            scroll-margin-top: 6rem; /* Account for fixed header */
        }
    </style>
</head>
<body class="min-h-screen bg-white font-sans text-gray-900 selection:bg-yellow-100 selection:text-yellow-900">

    <!-- Notification Toast Container -->
    <div id="notification-container" class="fixed bottom-8 right-8 z-50"></div>

    <!-- Checkout Modal Container -->
    <div id="modal-container" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in"></div>

    <!-- News Ticker -->
    <div class="bg-black text-white text-xs py-2 overflow-hidden whitespace-nowrap">
        <div class="inline-block animate-marquee px-4">
            <span class="mx-4">MARKET ALERT: Gold hits 3-month high.</span>
            <span class="mx-4 text-green-400">XAU/MYR &utri; 0.45%</span>
            <span class="mx-4">Silver demand increases in Asia sector.</span>
            <span class="mx-4 text-red-400">USD/MYR &vdar; 0.12%</span>
        </div>
    </div>

    <!-- Navbar (Fixed Top) -->
    <nav id="navbar" class="fixed top-0 w-full z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <a href="#hero" class="flex-shrink-0">
                    <span class="text-xl font-semibold tracking-tight text-gray-900">
                        Emas<span class="text-yellow-600">.</span>
                    </span>
                </a>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="#market" class="text-sm font-medium text-gray-500 hover:text-black transition-colors">Market</a>
                    <a href="#products" class="text-sm font-medium text-gray-500 hover:text-black transition-colors">Trade</a>
                    <a href="#" class="text-sm font-medium text-gray-500 hover:text-black transition-colors">Vault</a>
                    <a href="#" class="text-sm font-medium text-gray-500 hover:text-black transition-colors">Learn</a>
                    <button id="cart-button" class="bg-black text-white text-sm px-4 py-2 rounded-full hover:bg-gray-800 transition-all flex items-center gap-2">
                        <i data-lucide="shopping-bag" class="w-4 h-4"></i>
                        <span>Bag (<span id="cart-count">0</span>)</span>
                    </button>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-toggle" class="text-gray-500 hover:text-black">
                        <i data-lucide="menu" class="w-6 h-6" id="menu-icon"></i>
                        <i data-lucide="x" class="w-6 h-6 hidden" id="close-icon"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu" class="md:hidden hidden bg-white border-t border-gray-100 absolute w-full z-30 shadow-lg">
            <div class="px-4 pt-4 pb-3 space-y-4">
                <a href="#market" class="block text-2xl font-semibold text-gray-900">Market</a>
                <a href="#products" class="block text-2xl font-semibold text-gray-900">Trade</a>
                <a href="#" class="block text-2xl font-semibold text-gray-900">Vault</a>
                <a href="#" class="block text-2xl font-semibold text-gray-900">Learn</a>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main>
        <!-- Hero Section -->
        <section id="hero" class="relative pt-32 pb-16 sm:pt-40 sm:pb-24 overflow-hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                <h1 class="text-5xl sm:text-7xl font-semibold tracking-tight text-gray-900 mb-6">
                    Invest in <br class="hidden sm:block" />
                    <span class="bg-clip-text text-transparent bg-gradient-to-r from-yellow-500 to-yellow-700">
                        Timeless Value.
                    </span>
                </h1>
                <p class="mt-4 text-xl text-gray-500 max-w-2xl mx-auto font-light leading-relaxed">
                    Secure your future with 999.9 fine gold. Real-time trading, 
                    vault storage, and physical redemption. Simple. Secure.
                </p>
                <div class="mt-10 flex justify-center gap-4">
                    <button id="cta-button" class="bg-blue-600 text-white px-8 py-3 rounded-full text-lg font-medium hover:bg-blue-700 transition-all shadow-lg hover:shadow-xl">
                        Start Trading
                    </button>
                    <a href="#" class="text-blue-600 px-8 py-3 rounded-full text-lg font-medium hover:bg-blue-50 transition-all flex items-center">
                        Learn more <i data-lucide="chevron-right" class="w-4 h-4 ml-1"></i>
                    </a>
                </div>
            </div>
            <!-- Abstract Background Element -->
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-yellow-100 rounded-full blur-3xl opacity-20 -z-10 animate-pulse-slow"></div>
        </section>

        <!-- Live Ticker Section -->
        <section id="market" class="py-12 bg-white scroll-mt-24">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-8">
               <h2 class="text-3xl font-bold tracking-tight text-gray-900">Live Market</h2>
            </div>
            <!-- Live Ticker Component Output -->
            <div id="live-ticker" class="max-w-4xl mx-auto px-4 mb-20">
                <!-- Content will be injected by JavaScript -->
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="py-12 max-w-7xl mx-auto px-4 sm:px-6 lg:lg:px-8 scroll-mt-24">
            <div class="flex justify-between items-end mb-10">
                <h2 class="text-3xl font-bold tracking-tight text-gray-900">Featured Products</h2>
                <a href="#" class="text-blue-600 font-medium hover:text-blue-700 flex items-center">
                    View all <i data-lucide="chevron-right" class="w-4 h-4"></i>
                </a>
            </div>
            
            <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Product Cards will be injected by JavaScript -->
            </div>
        </section>

        <!-- Feature Grid Section -->
        <section class="bg-gray-50 py-24">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                    <!-- Feature Items -->
                    <div class="flex flex-col items-center text-center">
                        <div class="w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-6 text-yellow-600">
                           <i data-lucide="lock" class="w-8 h-8" stroke-width="1.5"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">Vault Security</h3>
                        <p class="text-gray-500 leading-relaxed max-w-xs">Your gold is stored in Grade A secure vaults with 24/7 surveillance and full insurance.</p>
                    </div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-6 text-yellow-600">
                            <i data-lucide="smartphone" class="w-8 h-8" stroke-width="1.5"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">Mobile First</h3>
                        <p class="text-gray-500 leading-relaxed max-w-xs">Track your portfolio, buy, sell, and redeem instantly from your phone.</p>
                    </div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-6 text-yellow-600">
                            <i data-lucide="shield" class="w-8 h-8" stroke-width="1.5"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">Shariah Compliant</h3>
                        <p class="text-gray-500 leading-relaxed max-w-xs">Certified compliant trading with physical backing for every gram you own.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-50 border-t border-gray-200 pt-16 pb-8 mt-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-12">
                <div>
                    <h4 class="font-semibold text-gray-900 mb-4">Platform</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li class="hover:text-gray-900 cursor-pointer">Live Prices</li>
                        <li class="hover:text-gray-900 cursor-pointer">Digital Gold</li>
                        <li class="hover:text-gray-900 cursor-pointer">Physical Store</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-900 mb-4">Support</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li class="hover:text-gray-900 cursor-pointer">Help Center</li>
                        <li class="hover:text-gray-900 cursor-pointer">Contact Us</li>
                        <li class="hover:text-gray-900 cursor-pointer">Shipping Status</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-900 mb-4">Legal</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li class="hover:text-gray-900 cursor-pointer">Privacy Policy</li>
                        <li class="hover:text-gray-900 cursor-pointer">Terms of Service</li>
                        <li class="hover:text-gray-900 cursor-pointer">Compliance</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-200 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-400">
                <p>&copy; <span id="current-year"></span> Emas Binshiman Sdn Bhd. All rights reserved.</p>
                <p class="mt-2 md:mt-0">Gold prices are indicative only. Physical products subject to availability.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- MOCK DATA ---
        const MOCK_PRODUCTS = [
            { id: 'p1', name: '10g Bunga Raya Gold Bar', purity: '999.9', weight: 10, image: 'https://images.unsplash.com/photo-1610375461490-67a338608314?q=80&w=200&auto=format&fit=crop', premium: 120 },
            { id: 'p2', name: '1 Dinar Coin (4.25g)', purity: '916', weight: 4.25, image: 'https://images.unsplash.com/photo-1579227114347-15d08fc37cae?auto=format&fit=crop&q=80&w=200', premium: 65 },
            { id: 'p3', name: '1kg Investment Cast Bar', purity: '999.9', weight: 1000, image: 'https://images.unsplash.com/photo-1605792657660-596af9009e82?auto=format&fit=crop&q=80&w=200', premium: 1500 }
        ];

        // --- STATE MANAGEMENT (Global Variables for simplicity) ---
        let livePrice = 385.50;
        let cartCount = 0;
        let currentModalProduct = null;
        let priceLockTimeout = null;

        document.getElementById('current-year').textContent = new Date().getFullYear();


        // --- UTILITY FUNCTIONS ---

        /**
         * Renders the current live price ticker to the DOM.
         */
        function renderLiveTicker(newPrice) {
            const liveTickerEl = document.getElementById('live-ticker');
            // Mock direction change
            const direction = newPrice >= livePrice ? 'up' : 'down';
            const colorClass = direction === 'up' ? 'text-green-600' : 'text-red-600';
            const icon = direction === 'up' ? 'arrow-up-right' : 'arrow-down-right';
            
            livePrice = newPrice;

            liveTickerEl.innerHTML = `
                <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 flex flex-col sm:flex-row justify-between items-center transition-all hover:shadow-md">
                    <div class="flex items-center gap-4 mb-4 sm:mb-0">
                        <div class="w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center text-yellow-600">
                            <i data-lucide="line-chart" class="w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500 uppercase tracking-wider">Gold Spot Price (MYR/g)</p>
                            <div class="flex items-baseline gap-2">
                                <h2 class="text-3xl font-bold tracking-tight transition-colors duration-500 ${colorClass}">
                                    RM ${livePrice.toFixed(2)}
                                </h2>
                                <span class="flex items-center text-sm font-medium ${colorClass}">
                                    <i data-lucide="${icon}" class="w-4 h-4 mr-1"></i>
                                    0.4%
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex gap-8 text-center sm:text-left">
                        <div><p class="text-xs text-gray-400 mb-1">Spread</p><p class="font-semibold text-gray-900">4.5%</p></div>
                        <div><p class="text-xs text-gray-400 mb-1">Low (24h)</p><p class="font-semibold text-gray-900">382.50</p></div>
                        <div><p class="text-xs text-gray-400 mb-1">High (24h)</p><p class="font-semibold text-gray-900">395.20</p></div>
                    </div>
                </div>
            `;
            // Re-initialize Lucide icons after injecting HTML
            // Check if lucide object is available globally (set in the fixed import block)
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons({ icons: window.lucide.icons });
            }
        }

        /**
         * Renders all product cards to the DOM.
         */
        function renderProducts() {
            const productGridEl = document.getElementById('product-grid');
            productGridEl.innerHTML = MOCK_PRODUCTS.map(product => {
                const totalPrice = (livePrice * product.weight) + product.premium;
                return `
                    <div class="group relative bg-white rounded-3xl p-6 border border-gray-100 transition-all hover:shadow-xl hover:-translate-y-1">
                        <div class="aspect-square w-full overflow-hidden rounded-2xl bg-gray-50 mb-6 flex items-center justify-center">
                            <img src="${product.image}" alt="${product.name}"
                                class="h-48 w-48 object-contain mix-blend-multiply group-hover:scale-110 transition-transform duration-500"
                                onerror="this.onerror=null; this.src='https://placehold.co/192x192/f3f4f6/9ca3af?text=Gold';"
                            />
                        </div>
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">${product.name}</h3>
                                <p class="text-sm text-gray-500 font-medium mt-1">${product.purity} Fine Gold</p>
                            </div>
                            <div class="text-right">
                                <p class="text-lg font-bold text-gray-900">RM ${totalPrice.toFixed(2)}</p>
                                <p class="text-xs text-green-600">In Stock</p>
                            </div>
                        </div>
                        <button data-product-id="${product.id}"
                            class="buy-button mt-6 w-full bg-gray-900 text-white py-3 rounded-xl font-medium hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 active:scale-95"
                        >
                            Buy Now
                        </button>
                    </div>
                `;
            }).join('');

            // Attach event listeners to all 'Buy Now' buttons
            document.querySelectorAll('.buy-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.currentTarget.dataset.productId;
                    const product = MOCK_PRODUCTS.find(p => p.id === productId);
                    const price = (livePrice * product.weight) + product.premium;
                    showCheckoutModal(product, price);
                });
            });
        }

        /**
         * Shows the floating notification toast.
         */
        function showNotification(message) {
            const container = document.getElementById('notification-container');
            container.innerHTML = `
                <div class="bg-gray-900 text-white px-6 py-4 rounded-xl shadow-2xl animate-fade-in flex items-center gap-3">
                    <div class="bg-green-500 rounded-full p-1"><i data-lucide="shield" class="w-3 h-3 text-white fill-white"></i></div>
                    ${message}
                </div>
            `;
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons({ icons: window.lucide.icons });
            }
            setTimeout(() => {
                // Clear the notification after the animation is complete
                const notificationEl = container.querySelector('div');
                if (notificationEl) {
                    notificationEl.classList.remove('animate-fade-in');
                    notificationEl.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                    setTimeout(() => container.innerHTML = '', 500);
                }
            }, 4000);
        }

        /**
         * Renders and shows the Checkout Modal.
         */
        function showCheckoutModal(product, price) {
            currentModalProduct = product;
            const modalContainer = document.getElementById('modal-container');
            modalContainer.classList.remove('hidden');
            modalContainer.classList.add('flex');

            let timeLeft = 300; // 5 minutes

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m}:${s < 10 ? '0' : ''}${s}`;
            };

            const renderModalContent = (time) => {
                const total = price + 10;
                return `
                    <div class="bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden animate-slide-up">
                        <!-- Header with Countdown -->
                        <div class="bg-gray-50 px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                            <span class="text-sm font-medium text-gray-500">Price Locked</span>
                            <div class="flex items-center gap-2 text-red-600 bg-red-50 px-3 py-1 rounded-full">
                                <i data-lucide="lock" class="w-3 h-3"></i>
                                <span id="time-left" class="text-sm font-mono font-bold">${formatTime(time)}</span>
                            </div>
                        </div>

                        <div class="p-8">
                            <div class="flex gap-4 mb-6">
                                <div class="w-20 h-20 bg-gray-100 rounded-xl overflow-hidden flex-shrink-0">
                                <img src="${product.image}" alt="thumb" class="w-full h-full object-cover" 
                                    onerror="this.onerror=null; this.src='https://placehold.co/80x80/e5e7eb/9ca3af?text=Gold';"
                                />
                                </div>
                                <div>
                                <h3 class="font-semibold text-gray-900">${product.name}</h3>
                                <p class="text-sm text-gray-500">${product.weight}g â€¢ ${product.purity}</p>
                                </div>
                            </div>

                            <div class="space-y-3 mb-8">
                                <div class="flex justify-between text-sm">
                                <span class="text-gray-500">Gold Price</span>
                                <span class="font-medium">RM ${price.toFixed(2)}</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                <span class="text-gray-500">Processing Fee</span>
                                <span class="font-medium">RM 10.00</span>
                                </div>
                                <div class="h-px bg-gray-100 my-2"></div>
                                <div class="flex justify-between text-lg font-bold text-gray-900">
                                <span>Total</span>
                                <span>RM ${total.toFixed(2)}</span>
                                </div>
                            </div>

                            <div class="space-y-3">
                                <button id="confirm-payment-btn" class="w-full bg-blue-600 text-white py-3.5 rounded-xl font-medium hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200">
                                Confirm Payment
                                </button>
                                <button id="cancel-payment-btn" class="w-full bg-white text-gray-500 py-3.5 rounded-xl font-medium hover:bg-gray-50 transition-colors">
                                Cancel
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 px-6 py-3 text-center text-xs text-gray-400">
                            Secure 256-bit SSL Encrypted Transaction
                        </div>
                    </div>
                `;
            };

            // Initial render
            modalContainer.innerHTML = renderModalContent(timeLeft);
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons({ icons: window.lucide.icons });
            }

            // Timer logic
            const timerEl = document.getElementById('time-left');
            const timer = setInterval(() => {
                timeLeft = timeLeft > 0 ? timeLeft - 1 : 0;
                if (timerEl) {
                    timerEl.textContent = formatTime(timeLeft);
                }
                if (timeLeft === 0) {
                    clearInterval(timer);
                    closeCheckoutModal();
                    showNotification("Order timed out. Price lock expired.");
                }
            }, 1000);

            // Store timeout reference to clear it later
            priceLockTimeout = timer;
            
            // Attach event listeners
            document.getElementById('confirm-payment-btn').addEventListener('click', confirmOrder);
            document.getElementById('cancel-payment-btn').addEventListener('click', closeCheckoutModal);
        }

        /**
         * Hides the Checkout Modal and clears the price lock timer.
         */
        function closeCheckoutModal() {
            clearInterval(priceLockTimeout);
            const modalContainer = document.getElementById('modal-container');
            modalContainer.classList.remove('flex');
            modalContainer.classList.add('hidden');
            modalContainer.innerHTML = '';
            currentModalProduct = null;
        }

        /**
         * Confirms the order, updates cart count, and shows a notification.
         */
        function confirmOrder() {
            closeCheckoutModal();
            cartCount++;
            document.getElementById('cart-count').textContent = cartCount;
            showNotification(`Order for ${currentModalProduct.name} placed successfully!`);
        }

        // --- INITIALIZATION AND EVENT LISTENERS ---

        document.addEventListener('DOMContentLoaded', () => {
            // Initial render
            renderLiveTicker(livePrice);
            renderProducts();

            // Mobile Menu Toggle
            const menuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIcon = document.getElementById('menu-icon');
            const closeIcon = document.getElementById('close-icon');

            menuToggle.addEventListener('click', () => {
                const isHidden = mobileMenu.classList.toggle('hidden');
                menuIcon.classList.toggle('hidden', !isHidden);
                closeIcon.classList.toggle('hidden', isHidden);
            });

            // CTA Button Scroll
            document.getElementById('cta-button').addEventListener('click', () => {
                document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
            });


            // --- LIVE PRICE SIMULATION ---
            setInterval(() => {
                const change = (Math.random() - 0.5) * 0.5; // Random fluctuation
                const newPrice = Math.max(350, livePrice + change);
                renderLiveTicker(newPrice);
                renderProducts(); // Re-render products to update prices
            }, 3000);
            
        });
    </script>

</body>
</html>